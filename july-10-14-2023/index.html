<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="https://github.com/sqlite/sqlite/blob/master/src/prepare.c#L684
test that cache is not growing w/o bound? you have a cache test tho righ?
 CRDT Base  p1: re-insertion p1: col level trigger rather than table level so we can deal with pk adjustment p1: warn on auto-increment use p1: automigrator stability p2: unpack columns table valued function p2: vtab syntax p2: turso crsqlite direct from browser vite-express rather than forking a process?"><meta property="og:title" content="july 10-14, 2023"><meta property="og:description" content="https://github.com/sqlite/sqlite/blob/master/src/prepare.c#L684
test that cache is not growing w/o bound? you have a cache test tho righ?
 CRDT Base  p1: re-insertion p1: col level trigger rather than table level so we can deal with pk adjustment p1: warn on auto-increment use p1: automigrator stability p2: unpack columns table valued function p2: vtab syntax p2: turso crsqlite direct from browser vite-express rather than forking a process?"><meta property="og:type" content="website"><meta property="og:image" content="https://vlcn-io.github.io/knowledgebase/icon.png"><meta property="og:url" content="https://vlcn-io.github.io/knowledgebase/july-10-14-2023/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="july 10-14, 2023"><meta name=twitter:description content="https://github.com/sqlite/sqlite/blob/master/src/prepare.c#L684
test that cache is not growing w/o bound? you have a cache test tho righ?
 CRDT Base  p1: re-insertion p1: col level trigger rather than table level so we can deal with pk adjustment p1: warn on auto-increment use p1: automigrator stability p2: unpack columns table valued function p2: vtab syntax p2: turso crsqlite direct from browser vite-express rather than forking a process?"><meta name=twitter:image content="https://vlcn-io.github.io/knowledgebase/icon.png"><meta name=twitter:site content="vlcnio"><title>july 10-14, 2023</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://vlcn-io.github.io/knowledgebase//icon.png><link href=https://vlcn-io.github.io/knowledgebase/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://vlcn-io.github.io/knowledgebase/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://vlcn-io.github.io/knowledgebase/js/darkmode.bfea887056c3a94b77f0f84698db5803.min.js></script>
<script src=https://vlcn-io.github.io/knowledgebase/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://vlcn-io.github.io/knowledgebase/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://vlcn-io.github.io/knowledgebase/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://vlcn-io.github.io/knowledgebase/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://vlcn-io.github.io/knowledgebase/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://vlcn-io.github.io/knowledgebase/",fetchData=Promise.all([fetch("https://vlcn-io.github.io/knowledgebase/indices/linkIndex.d420ab009398809ff425f80d5fb25a89.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://vlcn-io.github.io/knowledgebase/indices/contentIndex.a63a3b0e15144c94756c81f780d4aad0.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://vlcn-io.github.io/knowledgebase",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://vlcn-io.github.io/knowledgebase",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/vlcn-io.github.io\/knowledgebase\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=vlcn-io.github.io/knowledgebase src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://vlcn-io.github.io/knowledgebase/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://vlcn-io.github.io/knowledgebase/>ðŸª´ Vulcan Garden</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>july 10-14, 2023</h1><p class=meta>Last updated
Jul 20, 2023
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/july%2010-14,%202023.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents></nav></details></aside><p><a href=https://github.com/sqlite/sqlite/blob/master/src/prepare.c#L684 rel=noopener>https://github.com/sqlite/sqlite/blob/master/src/prepare.c#L684</a></p><p>test that cache is not growing w/o bound? you have a cache test tho righ?</p><ul><li>CRDT Base<ul><li><input disabled type=checkbox> p1: re-insertion</li><li><input disabled type=checkbox> p1: col level trigger rather than table level so we can deal with pk adjustment</li><li><input checked disabled type=checkbox> p1: warn on auto-increment use</li><li><input disabled type=checkbox> p1: automigrator stability</li><li><input checked disabled type=checkbox> p2: unpack columns table valued function</li><li><input disabled type=checkbox> p2: vtab syntax</li><li><input disabled type=checkbox> p2: turso crsqlite direct from browser</li><li><input disabled type=checkbox> vite-express rather than forking a process?</li><li><input checked disabled type=checkbox> test p2p still works with new networking code..</li></ul></li><li>Fly.io<ul><li><input disabled type=checkbox> provide count of changed db versions post merge</li></ul></li><li>DevX / Starting<ul><li><input disabled type=checkbox> Hooks for read-only access or other permission rules</li><li><input disabled type=checkbox> Document plan for <a href=/knowledgebase/row-level-security rel=noopener class=internal-link data-src=/knowledgebase/row-level-security>row level security</a></li></ul></li><li>TypedSQL<ul><li><input checked disabled type=checkbox> split that PR into <code>typed-sql</code> and <code>typed-db</code></li></ul></li><li>Other<ul><li><input disabled type=checkbox> Webkit bug report for WASM JIT</li><li><input checked disabled type=checkbox> <a href=/knowledgebase/Beyond-CRDTs-The-Next-Frontier-of-Local-First rel=noopener class=internal-link data-src=/knowledgebase/Beyond-CRDTs-The-Next-Frontier-of-Local-First>Beyond CRDTs, The Next Frontier of Local-First</a><ul><li><input checked disabled type=checkbox>
<a href=https://2023.splashcon.org/home/plf-2023 rel=noopener>https://2023.splashcon.org/home/plf-2023</a></li></ul></li><li><input disabled type=checkbox> Garden index</li></ul></li><li>Riffle<ul><li><input disabled type=checkbox> IVM / inverted DB approach<ul><li><input disabled type=checkbox> Hash - needs to be varargs.</li><li><a href=https://github.com/nalgeon/sqlean/blob/ab0e7e2173328fadad492673fbdd4851a6d3f9e6/src/crypto/extension.c#L198 rel=noopener>https://github.com/nalgeon/sqlean/blob/ab0e7e2173328fadad492673fbdd4851a6d3f9e6/src/crypto/extension.c#L198</a></li><li><a href=https://github.com/nalgeon/sqlean/blob/main/src/crypto/sha1.c rel=noopener>https://github.com/nalgeon/sqlean/blob/main/src/crypto/sha1.c</a></li></ul></li></ul></li><li>Vision<ul><li><input disabled type=checkbox> Frontpage guide<ul><li><input disabled type=checkbox> automigrator</li></ul></li><li><input checked disabled type=checkbox> <a href=/knowledgebase/Beyond-CRDTs-The-Next-Frontier-of-Local-First rel=noopener class=internal-link data-src=/knowledgebase/Beyond-CRDTs-The-Next-Frontier-of-Local-First>Beyond CRDTs, The Next Frontier of Local-First</a></li></ul></li></ul><p>what actually happened:</p><ul><li>typed sql</li><li>execution distraction</li><li>start rust conversion</li></ul><a href=#scratch><h1 id=scratch><span class=hanchor arialabel=Anchor># </span>Scratch</h1></a><p>col-specific-triggers:</p><ul><li>update on pk &mldr; always means delete of the old thing?</li><li>insert on pk &mldr; don&rsquo;t need col specific triggers for pk insert. Only on insert of row to create or increment the CL sentinel.</li><li>delete on pk &mldr; don&rsquo;t need. Only need delete on row to update sentinel.</li></ul><p>Implement delete-wins / existing behavior with CL sentinel instead of pko and delete sentinels?
Then move it to CL proper?</p><ul><li>add pko on insert</li></ul><p>So we only need col specific triggers for update?
Inserts should overwrite clock values anyway for the new model given we compare on CL.</p><p>Yeah, I&rsquo;m sure we&rsquo;re coming from pretty different backgrounds.</p><p>Backing up &ndash;</p><p>There&rsquo;s a bunch of problems when it comes to managing state on a rich client like a mobile app or single page app in the browser. Once you throw sync and multiplayer into the mix it gets really hard.</p><p>My main thesis is that client side applications would benefit greatly from leveraging a database. The use of SQLite is pretty common on iOS and Android but the database still doesn&rsquo;t handle reactivity, syncing offline edits, loading data from the server, or multiplayer in those environments.</p><ul><li>Reactivity &ndash; The lack of reactivity means data flow often becomes a tangled web of observers</li><li>Syncing Offline Edits &ndash; Not being able to sync changes made while offline means the developer finds themselves implementing it themselves through some operation queue and manually writing conflict resolution code.</li><li>Loading data from the server &ndash; this is the most radical but if the client DB could load data from the server (just treating it as another storage layer after the disk) data fetching should get simpler on the client.</li><li>Multiplayer &ndash; this is similar to the making changes while offline. Developers are left to their own devices to figure out how to implement multiplayer experiences.</li></ul><p>So I have pretty strong opinions on what the solution looks like of course always open to real world feedback of users.</p><p>The general maturity curve for state in an app is something like:</p><ol><li>Keep everything in memory. Save and load the entire blob on app open and exit and maybe some interval</li><li>The blob starts getting big so devs partition it into different documents</li><li></li></ol><p>My main thesis is that frontend development would benefit greatly from having a database on the frontend.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://vlcn-io.github.io/knowledgebase/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Matt Wonlaw using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://vlcn-io.github.io/knowledgebase/>Home</a></li><li><a href=https://twitter.com/vlcnio>Twitter</a></li><li><a href=https://github.com/vlcn-io>GitHub</a></li></ul></footer></div></div></body></html>